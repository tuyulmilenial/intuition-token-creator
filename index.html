<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intuition Testnet Token Creator (Real Deployment)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .notification { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); padding: 12px 20px; border-radius: 8px; color: white; opacity: 0; visibility: hidden; transition: opacity 0.3s, visibility 0.3s; z-index: 1000; }
        .notification.show { opacity: 1; visibility: visible; }
        .notification.success { background-color: #28a745; }
        .notification.error { background-color: #dc3545; }
        .wallet-btn img { width: 28px; height: 28px; margin-right: 12px; }
        .spinner { border: 2px solid #f3f3f3; border-top: 2px solid #3498db; border-radius: 50%; width: 16px; height: 16px; animation: spin 1s linear infinite; display: inline-block; margin-right: 8px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-gray-900 text-white flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-md mx-auto bg-gray-800 rounded-2xl shadow-lg p-8 space-y-6">
        <div class="text-center">
            <h1 class="text-3xl font-bold text-cyan-400">Intuition Token Creator</h1>
            <p class="text-gray-400 mt-2">Deploy a real ERC20 token on the Intuition network.</p>
        </div>

        <div id="connectionContainer">
            <div class="bg-gray-700 p-4 rounded-lg text-center mb-4">
                <p class="text-sm font-medium text-gray-300">Wallet Status</p>
                <p id="walletAddress" class="text-lg font-semibold text-gray-400 truncate">Not Connected</p>
            </div>
            <div id="wallet-selection" class="space-y-3">
                <p id="detection-status" class="text-center text-gray-400">Detecting wallets...</p>
            </div>
        </div>

        <div id="tokenForm" class="hidden space-y-4 pt-4 border-t border-gray-700">
            <h2 class="text-xl font-semibold text-center text-gray-200">2. Fill Token Details</h2>
            <div>
                <label for="tokenName" class="block text-sm font-medium text-gray-300 mb-1">Token Name</label>
                <input type="text" id="tokenName" placeholder="e.g., My Real Token" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-cyan-500 focus:border-cyan-500 transition">
            </div>
            <div>
                <label for="tokenTicker" class="block text-sm font-medium text-gray-300 mb-1">Ticker (Symbol)</label>
                <input type="text" id="tokenTicker" placeholder="e.g., MRT" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-cyan-500 focus:border-cyan-500 transition">
            </div>
            <div>
                <label for="totalSupply" class="block text-sm font-medium text-gray-300 mb-1">Total Supply</label>
                <input type="number" id="totalSupply" placeholder="e.g., 1000000" class="w-full bg-gray-700 border border-gray-600 rounded-lg px-3 py-2 text-white focus:ring-cyan-500 focus:border-cyan-500 transition">
            </div>
            <button id="createTokenBtn" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-lg transition duration-300 ease-in-out transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-opacity-75 flex items-center justify-center">
                Deploy Token Contract
            </button>
            <div id="txLinkContainer" class="hidden text-center mt-4 p-3 bg-gray-700 rounded-lg"></div>
        </div>
    </div>

    <div id="notification" class="notification"></div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>

    <script>
        // --- DOM Element References ---
        const walletSelection = document.getElementById('wallet-selection');
        const detectionStatus = document.getElementById('detection-status');
        const walletAddress = document.getElementById('walletAddress');
        const tokenForm = document.getElementById('tokenForm');
        const createTokenBtn = document.getElementById('createTokenBtn');
        const notification = document.getElementById('notification');
        const connectionContainer = document.getElementById('connectionContainer');
        const txLinkContainer = document.getElementById('txLinkContainer');

        // --- Intuition Testnet Network Configuration ---
        const intuitionTestnet = {
            chainId: '0x350B',
            chainName: 'Intuition Testnet',
            nativeCurrency: { name: 'tTRUST', symbol: 'tTRUST', decimals: 18 },
            rpcUrls: ['https://testnet.rpc.intuition.systems/http'],
            blockExplorerUrls: ['https://testnet.explorer.intuition.systems/'],
        };
        
        let provider;
        let signer;
        const discoveredProviders = new Map();

        // --- MAIN LOGIC STARTS HERE ---

        // ===================================================================================
        // === MANDATORY STEP: PASTE YOUR ABI AND BYTECODE HERE ===
        // ===================================================================================
        const contract_abi = [
	{
		"inputs": [
			{
				"internalType": "string",
				"name": "name",
				"type": "string"
			},
			{
				"internalType": "string",
				"name": "symbol",
				"type": "string"
			},
			{
				"internalType": "uint256",
				"name": "initialSupply",
				"type": "uint256"
			}
		],
		"stateMutability": "nonpayable",
		"type": "constructor"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "spender",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "value",
				"type": "uint256"
			}
		],
		"name": "Approval",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "previousOwner",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "newOwner",
				"type": "address"
			}
		],
		"name": "OwnershipTransferred",
		"type": "event"
	},
	{
		"anonymous": false,
		"inputs": [
			{
				"indexed": true,
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"indexed": true,
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"indexed": false,
				"internalType": "uint256",
				"name": "value",
				"type": "uint256"
			}
		],
		"name": "Transfer",
		"type": "event"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "owner",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "spender",
				"type": "address"
			}
		],
		"name": "allowance",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "spender",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "approve",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "account",
				"type": "address"
			}
		],
		"name": "balanceOf",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "decimals",
		"outputs": [
			{
				"internalType": "uint8",
				"name": "",
				"type": "uint8"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "spender",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "subtractedValue",
				"type": "uint256"
			}
		],
		"name": "decreaseAllowance",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "spender",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "addedValue",
				"type": "uint256"
			}
		],
		"name": "increaseAllowance",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "name",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "owner",
		"outputs": [
			{
				"internalType": "address",
				"name": "",
				"type": "address"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "renounceOwnership",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "symbol",
		"outputs": [
			{
				"internalType": "string",
				"name": "",
				"type": "string"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [],
		"name": "totalSupply",
		"outputs": [
			{
				"internalType": "uint256",
				"name": "",
				"type": "uint256"
			}
		],
		"stateMutability": "view",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "transfer",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "from",
				"type": "address"
			},
			{
				"internalType": "address",
				"name": "to",
				"type": "address"
			},
			{
				"internalType": "uint256",
				"name": "amount",
				"type": "uint256"
			}
		],
		"name": "transferFrom",
		"outputs": [
			{
				"internalType": "bool",
				"name": "",
				"type": "bool"
			}
		],
		"stateMutability": "nonpayable",
		"type": "function"
	},
	{
		"inputs": [
			{
				"internalType": "address",
				"name": "newOwner",
				"type": "address"
			}
		],
		"name": "transferOwnership",
		"outputs": [],
		"stateMutability": "nonpayable",
		"type": "function"
	}
];
        const contract_bytecode = '0x608060405234801561000f575f5ffd5b50604051611fe3380380611fe383398181016040528101906100319190610468565b8282816003908161004291906106f7565b50806004908161005291906106f7565b5050506100716100666100b260201b60201c565b6100b960201b60201c565b5f61008061017c60201b60201c565b600a61008c919061092e565b826100979190610978565b90506100a9338261018460201b60201c565b50505050610a8c565b5f33905090565b5f60055f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690508160055f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b5f6012905090565b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036101f2576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016101e990610a13565b60405180910390fd5b6102035f83836102de60201b60201c565b8060025f8282546102149190610a31565b92505081905550805f5f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825401925050819055508173ffffffffffffffffffffffffffffffffffffffff165f73ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef836040516102c19190610a73565b60405180910390a36102da5f83836102e360201b60201c565b5050565b505050565b505050565b5f604051905090565b5f5ffd5b5f5ffd5b5f5ffd5b5f5ffd5b5f601f19601f8301169050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b61034782610301565b810181811067ffffffffffffffff8211171561036657610365610311565b5b80604052505050565b5f6103786102e8565b9050610384828261033e565b919050565b5f67ffffffffffffffff8211156103a3576103a2610311565b5b6103ac82610301565b9050602081019050919050565b8281835e5f83830152505050565b5f6103d96103d484610389565b61036f565b9050828152602081018484840111156103f5576103f46102fd565b5b6104008482856103b9565b509392505050565b5f82601f83011261041c5761041b6102f9565b5b815161042c8482602086016103c7565b91505092915050565b5f819050919050565b61044781610435565b8114610451575f5ffd5b50565b5f815190506104628161043e565b92915050565b5f5f5f6060848603121561047f5761047e6102f1565b5b5f84015167ffffffffffffffff81111561049c5761049b6102f5565b5b6104a886828701610408565b935050602084015167ffffffffffffffff8111156104c9576104c86102f5565b5b6104d586828701610408565b92505060406104e686828701610454565b9150509250925092565b5f81519050919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f600282049050600182168061053e57607f821691505b602082108103610551576105506104fa565b5b50919050565b5f819050815f5260205f209050919050565b5f6020601f8301049050919050565b5f82821b905092915050565b5f600883026105b37fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff82610578565b6105bd8683610578565b95508019841693508086168417925050509392505050565b5f819050919050565b5f6105f86105f36105ee84610435565b6105d5565b610435565b9050919050565b5f819050919050565b610611836105de565b61062561061d826105ff565b848454610584565b825550505050565b5f5f905090565b61063c61062d565b610647818484610608565b505050565b5b8181101561066a5761065f5f82610634565b60018101905061064d565b5050565b601f8211156106af5761068081610557565b61068984610569565b81016020851015610698578190505b6106ac6106a485610569565b83018261064c565b50505b505050565b5f82821c905092915050565b5f6106cf5f19846008026106b4565b1980831691505092915050565b5f6106e783836106c0565b9150826002028217905092915050565b610700826104f0565b67ffffffffffffffff81111561071957610718610311565b5b6107238254610527565b61072e82828561066e565b5f60209050601f83116001811461075f575f841561074d578287015190505b61075785826106dc565b8655506107be565b601f19841661076d86610557565b5f5b828110156107945784890151825560018201915060208501945060208101905061076f565b868310156107b157848901516107ad601f8916826106c0565b8355505b6001600288020188555050505b505050505050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f8160011c9050919050565b5f5f8291508390505b600185111561084857808604811115610824576108236107c6565b5b60018516156108335780820291505b8081029050610841856107f3565b9450610808565b94509492505050565b5f82610860576001905061091b565b8161086d575f905061091b565b8160018114610883576002811461088d576108bc565b600191505061091b565b60ff84111561089f5761089e6107c6565b5b8360020a9150848211156108b6576108b56107c6565b5b5061091b565b5060208310610133831016604e8410600b84101617156108f15782820a9050838111156108ec576108eb6107c6565b5b61091b565b6108fe84848460016107ff565b92509050818404811115610915576109146107c6565b5b81810290505b9392505050565b5f60ff82169050919050565b5f61093882610435565b915061094383610922565b92506109707fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8484610851565b905092915050565b5f61098282610435565b915061098d83610435565b925082820261099b81610435565b915082820484148315176109b2576109b16107c6565b5b5092915050565b5f82825260208201905092915050565b7f45524332303a206d696e7420746f20746865207a65726f2061646472657373005f82015250565b5f6109fd601f836109b9565b9150610a08826109c9565b602082019050919050565b5f6020820190508181035f830152610a2a816109f1565b9050919050565b5f610a3b82610435565b9150610a4683610435565b9250828201905080821115610a5e57610a5d6107c6565b5b92915050565b610a6d81610435565b82525050565b5f602082019050610a865f830184610a64565b92915050565b61154a80610a995f395ff3fe608060405234801561000f575f5ffd5b50600436106100e8575f3560e01c8063715018a61161008a578063a457c2d711610064578063a457c2d71461024c578063a9059cbb1461027c578063dd62ed3e146102ac578063f2fde38b146102dc576100e8565b8063715018a6146102065780638da5cb5b1461021057806395d89b411461022e576100e8565b806323b872dd116100c657806323b872dd14610158578063313ce5671461018857806339509351146101a657806370a08231146101d6576100e8565b806306fdde03146100ec578063095ea7b31461010a57806318160ddd1461013a575b5f5ffd5b6100f46102f8565b6040516101019190610d46565b60405180910390f35b610124600480360381019061011f9190610df7565b610388565b6040516101319190610e4f565b60405180910390f35b6101426103aa565b60405161014f9190610e77565b60405180910390f35b610172600480360381019061016d9190610e90565b6103b3565b60405161017f9190610e4f565b60405180910390f35b6101906103e1565b60405161019d9190610efb565b60405180910390f35b6101c060048036038101906101bb9190610df7565b6103e9565b6040516101cd9190610e4f565b60405180910390f35b6101f060048036038101906101eb9190610f14565b61041f565b6040516101fd9190610e77565b60405180910390f35b61020e610464565b005b610218610477565b6040516102259190610f4e565b60405180910390f35b61023661049f565b6040516102439190610d46565b60405180910390f35b61026660048036038101906102619190610df7565b61052f565b6040516102739190610e4f565b60405180910390f35b61029660048036038101906102919190610df7565b6105a4565b6040516102a39190610e4f565b60405180910390f35b6102c660048036038101906102c19190610f67565b6105c6565b6040516102d39190610e77565b60405180910390f35b6102f660048036038101906102f19190610f14565b610648565b005b60606003805461030790610fd2565b80601f016020809104026020016040519081016040528092919081815260200182805461033390610fd2565b801561037e5780601f106103555761010080835404028352916020019161037e565b820191905f5260205f20905b81548152906001019060200180831161036157829003601f168201915b5050505050905090565b5f5f6103926106ca565b905061039f8185856106d1565b600191505092915050565b5f600254905090565b5f5f6103bd6106ca565b90506103ca858285610894565b6103d585858561091f565b60019150509392505050565b5f6012905090565b5f5f6103f36106ca565b905061041481858561040585896105c6565b61040f919061102f565b6106d1565b600191505092915050565b5f5f5f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20549050919050565b61046c610b8b565b6104755f610c09565b565b5f60055f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff16905090565b6060600480546104ae90610fd2565b80601f01602080910402602001604051908101604052809291908181526020018280546104da90610fd2565b80156105255780601f106104fc57610100808354040283529160200191610525565b820191905f5260205f20905b81548152906001019060200180831161050857829003601f168201915b5050505050905090565b5f5f6105396106ca565b90505f61054682866105c6565b90508381101561058b576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610582906110d2565b60405180910390fd5b61059882868684036106d1565b60019250505092915050565b5f5f6105ae6106ca565b90506105bb81858561091f565b600191505092915050565b5f60015f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054905092915050565b610650610b8b565b5f73ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff16036106be576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016106b590611160565b60405180910390fd5b6106c781610c09565b50565b5f33905090565b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff160361073f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610736906111ee565b60405180910390fd5b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036107ad576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016107a49061127c565b60405180910390fd5b8060015f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f8473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f20819055508173ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff167f8c5be1e5ebec7d5bd14f71427d1e84f3dd0314c0f7b2291e5b200ac8c7c3b925836040516108879190610e77565b60405180910390a3505050565b5f61089f84846105c6565b90507fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff8114610919578181101561090b576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610902906112e4565b60405180910390fd5b61091884848484036106d1565b5b50505050565b5f73ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff160361098d576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161098490611372565b60405180910390fd5b5f73ffffffffffffffffffffffffffffffffffffffff168273ffffffffffffffffffffffffffffffffffffffff16036109fb576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016109f290611400565b60405180910390fd5b610a06838383610ccc565b5f5f5f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2054905081811015610a89576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610a809061148e565b60405180910390fd5b8181035f5f8673ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f2081905550815f5f8573ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020015f205f82825401925050819055508273ffffffffffffffffffffffffffffffffffffffff168473ffffffffffffffffffffffffffffffffffffffff167fddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3ef84604051610b729190610e77565b60405180910390a3610b85848484610cd1565b50505050565b610b936106ca565b73ffffffffffffffffffffffffffffffffffffffff16610bb1610477565b73ffffffffffffffffffffffffffffffffffffffff1614610c07576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610bfe906114f6565b60405180910390fd5b565b5f60055f9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1690508160055f6101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055508173ffffffffffffffffffffffffffffffffffffffff168173ffffffffffffffffffffffffffffffffffffffff167f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e060405160405180910390a35050565b505050565b505050565b5f81519050919050565b5f82825260208201905092915050565b8281835e5f83830152505050565b5f601f19601f8301169050919050565b5f610d1882610cd6565b610d228185610ce0565b9350610d32818560208601610cf0565b610d3b81610cfe565b840191505092915050565b5f6020820190508181035f830152610d5e8184610d0e565b905092915050565b5f5ffd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f610d9382610d6a565b9050919050565b610da381610d89565b8114610dad575f5ffd5b50565b5f81359050610dbe81610d9a565b92915050565b5f819050919050565b610dd681610dc4565b8114610de0575f5ffd5b50565b5f81359050610df181610dcd565b92915050565b5f5f60408385031215610e0d57610e0c610d66565b5b5f610e1a85828601610db0565b9250506020610e2b85828601610de3565b9150509250929050565b5f8115159050919050565b610e4981610e35565b82525050565b5f602082019050610e625f830184610e40565b92915050565b610e7181610dc4565b82525050565b5f602082019050610e8a5f830184610e68565b92915050565b5f5f5f60608486031215610ea757610ea6610d66565b5b5f610eb486828701610db0565b9350506020610ec586828701610db0565b9250506040610ed686828701610de3565b9150509250925092565b5f60ff82169050919050565b610ef581610ee0565b82525050565b5f602082019050610f0e5f830184610eec565b92915050565b5f60208284031215610f2957610f28610d66565b5b5f610f3684828501610db0565b91505092915050565b610f4881610d89565b82525050565b5f602082019050610f615f830184610f3f565b92915050565b5f5f60408385031215610f7d57610f7c610d66565b5b5f610f8a85828601610db0565b9250506020610f9b85828601610db0565b9150509250929050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52602260045260245ffd5b5f6002820490506001821680610fe957607f821691505b602082108103610ffc57610ffb610fa5565b5b50919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b5f61103982610dc4565b915061104483610dc4565b925082820190508082111561105c5761105b611002565b5b92915050565b7f45524332303a2064656372656173656420616c6c6f77616e63652062656c6f775f8201527f207a65726f000000000000000000000000000000000000000000000000000000602082015250565b5f6110bc602583610ce0565b91506110c782611062565b604082019050919050565b5f6020820190508181035f8301526110e9816110b0565b9050919050565b7f4f776e61626c653a206e6577206f776e657220697320746865207a65726f20615f8201527f6464726573730000000000000000000000000000000000000000000000000000602082015250565b5f61114a602683610ce0565b9150611155826110f0565b604082019050919050565b5f6020820190508181035f8301526111778161113e565b9050919050565b7f45524332303a20617070726f76652066726f6d20746865207a65726f206164645f8201527f7265737300000000000000000000000000000000000000000000000000000000602082015250565b5f6111d8602483610ce0565b91506111e38261117e565b604082019050919050565b5f6020820190508181035f830152611205816111cc565b9050919050565b7f45524332303a20617070726f766520746f20746865207a65726f2061646472655f8201527f7373000000000000000000000000000000000000000000000000000000000000602082015250565b5f611266602283610ce0565b91506112718261120c565b604082019050919050565b5f6020820190508181035f8301526112938161125a565b9050919050565b7f45524332303a20696e73756666696369656e7420616c6c6f77616e63650000005f82015250565b5f6112ce601d83610ce0565b91506112d98261129a565b602082019050919050565b5f6020820190508181035f8301526112fb816112c2565b9050919050565b7f45524332303a207472616e736665722066726f6d20746865207a65726f2061645f8201527f6472657373000000000000000000000000000000000000000000000000000000602082015250565b5f61135c602583610ce0565b915061136782611302565b604082019050919050565b5f6020820190508181035f83015261138981611350565b9050919050565b7f45524332303a207472616e7366657220746f20746865207a65726f20616464725f8201527f6573730000000000000000000000000000000000000000000000000000000000602082015250565b5f6113ea602383610ce0565b91506113f582611390565b604082019050919050565b5f6020820190508181035f830152611417816113de565b9050919050565b7f45524332303a207472616e7366657220616d6f756e74206578636565647320625f8201527f616c616e63650000000000000000000000000000000000000000000000000000602082015250565b5f611478602683610ce0565b91506114838261141e565b604082019050919050565b5f6020820190508181035f8301526114a58161146c565b9050919050565b7f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e65725f82015250565b5f6114e0602083610ce0565b91506114eb826114ac565b602082019050919050565b5f6020820190508181035f83015261150d816114d4565b905091905056fea2646970667358221220b33fb6dec78150d607e4ce2491a60a70155b9b7ed23518c112494e9c2257cc6a64736f6c634300081e0033'; // PASTE THE BYTECODE YOU COPIED FROM REMIX HERE (must start with '0x')
        // ===================================================================================

        function showNotification(message, type = 'success') {
            notification.textContent = message;
            notification.className = `notification ${type} show`;
            setTimeout(() => { notification.classList.remove('show'); }, 3000);
        }

        async function switchToIntuitionNetwork(currentProvider) {
            try {
                await currentProvider.request({ method: 'wallet_switchEthereumChain', params: [{ chainId: intuitionTestnet.chainId }] });
                showNotification("Switched to Intuition Testnet");
            } catch (switchError) {
                if (switchError.code === 4902) {
                    try {
                        await currentProvider.request({ method: 'wallet_addEthereumChain', params: [intuitionTestnet] });
                        showNotification("Intuition network added");
                    } catch (addError) { showNotification("Failed to add network.", 'error'); }
                } else { showNotification("Failed to switch network.", 'error'); }
            }
        }

        async function connectWallet(providerDetail) {
            try {
                provider = new ethers.providers.Web3Provider(providerDetail.provider);
                await provider.send("eth_requestAccounts", []);
                signer = provider.getSigner();
                const address = await signer.getAddress();
                
                walletAddress.textContent = `${address.substring(0, 6)}...${address.substring(address.length - 4)}`;
                connectionContainer.innerHTML = ''; 
                connectionContainer.appendChild(walletAddress.parentElement); 
                
                showNotification(`Connected with ${providerDetail.info.name}!`);
                await switchToIntuitionNetwork(providerDetail.provider);
                tokenForm.classList.remove('hidden');
            } catch (error) {
                console.error("Wallet connection failed:", error);
                showNotification(`Connection failed: ${error.message || 'User rejected request.'}`, 'error');
            }
        }

        function createWalletButton(providerDetail) {
            const button = document.createElement('button');
            button.className = "wallet-btn w-full bg-cyan-500 hover:bg-cyan-600 text-white font-bold py-3 px-4 rounded-lg transition duration-300 ease-in-out flex items-center justify-center";
            button.innerHTML = `<img src="${providerDetail.info.icon}" alt="${providerDetail.info.name} icon"> Connect ${providerDetail.info.name}`;
            button.onclick = () => connectWallet(providerDetail);
            walletSelection.appendChild(button);
        }

        window.addEventListener('eip6963:announceProvider', (event) => {
            const providerDetail = event.detail;
            if (discoveredProviders.has(providerDetail.info.uuid)) return;
            discoveredProviders.set(providerDetail.info.uuid, providerDetail);
            if (detectionStatus.style.display !== 'none') detectionStatus.style.display = 'none';
            createWalletButton(providerDetail);
        });

        window.dispatchEvent(new Event('eip6963:requestProvider'));

        setTimeout(() => {
            if (discoveredProviders.size === 0 && typeof window.ethereum !== 'undefined') {
                detectionStatus.style.display = 'none';
                createWalletButton({
                    info: { name: 'Browser Wallet', icon: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU2IiBoZWlnaHQ9IjI1NiIgdmlld0JveD0iMCAwIDI1NiAyNTYiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTIyOS41IDc1LjYgMTQ0LjIgMjguMWE4IDggMCAwIDAtMTIuNCAwbC04NS4zIDQ3LjVhOCA4IDAgMCAwLTQuMSAxMS4xbDI2LjYgNjEuMWExNiAxNiAwIDAgMCAzMC4yIDBsMjYuNi02MS4xYTggOCAwIDAgMSAxMi40IDBsMjYuNiA2MS4xYTE2IDE2IDAgMCAwIDMwLjIgMGwyNi42LTYxLjFhOCA4IDAgMCAwLTQuMS0xMS4xWiIgZmlsbD0iI2Y2ODY1YiIvPjxwYXRoIGQ9Im0xNjAuNCAxMjAuMi0yNi42IDYxLjFhMTYgMTYgMCAwIDEtMzAuMiAwbC0yNi42LTYxLjFhOCA4IDAgMCAwLTEyLjQgMGwtMjYuNiA2MS4xYTE2IDE2IDAgMCAwIDguNyAyMS44bDgwLjEgNDEuMmE4IDggMCAwIDAgNy42IDBsODAuMS0NDEuMmE4IDggMCAwIDAgOC43LTIxLjE4bC0yNi42LTYxLjFhOCA4IDAgMCAwLTEyLjQgMFoiIGZpbGw9IiNjMDc0MmIiLz48cGF0aCBkPSJtMTg3IDE4MS4zLTI2LjYtNjEuMWE4IDggMCAwIDAtMTIuNCAwbC0xMy4zIDMwLjZhMTYgMTYgMCAwIDEgMTUuMSA5LjlsMjEuOCA3LjNhOCA4IDAgMCAxIDUuNCAxMy4zWiIgZmlsbD0iI2UyNzYyYiIvPjxwYXRoIGQ9Im02OC44IDE4MS4zIDI2LjgtNjEuMWE4IDggMCAwIDEgMTIuNCAwbDEzLjMgMzAuNmExNiAxNiAwIDAgMC0xNS4xIDkuOWwtMjEuOCA3LjNhOCA4IDAgMCAwLTUuNCAxMy4zWiIgZmlsbD0iI2UyNzYyYiIvPjxwYXRoIGQ9Im0xNTUgMTQxLjIgMTMuMy0zMC42YTggOCAwIDAgMC0xMi40IDBsLTEzLjMgMzAuNmExNiAxNiAwIDAgMCAwIDIwLjJsMTMuMyAzMC42YTggOCAwIDAgMCAxMi40IDBaIiBmaWxsPSIjZTU3MzJiIi8+PHBhdGggZD0ibTEwMSAxNDEuMi0xMy4zLTMwLjZhOCA4IDAgMCAwLTEyLjQgMGwtMTMuMyAzMC42YTE2IDE2IDAgMCAwIDAgMjAuMmwxMy4zIDMwLjZhOCA4IDAgMCAwIDEyLjQgMFoiIGZpbGw9IiNlNTczMmIiLz48L3N2Zz4=' }, 
                    provider: window.ethereum
                });
            } else if (discoveredProviders.size === 0) {
                detectionStatus.textContent = 'No wallet detected. Please install a browser wallet.';
            }
        }, 1000);

        async function deployTokenContract() {
            const tokenName = document.getElementById('tokenName').value;
            const tokenTicker = document.getElementById('tokenTicker').value;
            const totalSupply = document.getElementById('totalSupply').value;

            if (!tokenName || !tokenTicker || !totalSupply) {
                return showNotification("Please fill in all token details.", 'error');
            }
            if (!contract_abi || contract_abi.length === 0 || contract_bytecode === '0x' || contract_bytecode.length < 10) {
                return showNotification("ABI and Bytecode are missing. Please follow the instructions to paste them into the script.", 'error');
            }

            const originalButtonText = createTokenBtn.innerHTML;
            createTokenBtn.disabled = true;
            createTokenBtn.innerHTML = `<div class="spinner"></div> Waiting for Confirmation...`;
            txLinkContainer.classList.add('hidden');

            try {
                // 1. Create a "factory" for deploying our contract
                const factory = new ethers.ContractFactory(contract_abi, contract_bytecode, signer);

                // 2. Send the DEPLOY transaction, with arguments for the constructor
                // Arguments: name, symbol, initialSupply
                const contract = await factory.deploy(tokenName, tokenTicker, totalSupply);

                showNotification("Deploying contract... waiting for confirmation.");
                
                // 3. Wait for the deployment to be mined
                const receipt = await contract.deployTransaction.wait();
                const txHash = receipt.transactionHash;
                const contractAddress = receipt.contractAddress;

                const explorerUrl = `${intuitionTestnet.blockExplorerUrls[0]}tx/${txHash}`;
                txLinkContainer.innerHTML = `
                    <p class="text-sm text-gray-300">Contract deployed successfully!</p>
                    <p class="text-xs text-gray-400">Token Address: ${contractAddress}</p>
                    <a href="${explorerUrl}" target="_blank" rel="noopener noreferrer" class="text-cyan-400 hover:underline break-all">
                        View Deployment Transaction
                    </a>
                `;
                txLinkContainer.classList.remove('hidden');
                showNotification(`Token "${tokenName}" created!`);

            } catch (error) {
                console.error("Deployment failed:", error);
                if (error.code === 4001 || error.code === 'ACTION_REJECTED') {
                    showNotification("Transaction rejected by user.", 'error');
                } else {
                    showNotification("An error occurred during deployment.", 'error');
                }
            } finally {
                createTokenBtn.disabled = false;
                createTokenBtn.innerHTML = originalButtonText;
            }
        }

        createTokenBtn.addEventListener('click', deployTokenContract);
    </script>
</body>
</html>
